<div id="info-tooltip-contents" style="display:none;">
  <div class="popover-title">
    <h5>
      {{ title }}
    </h5>
  </div>

  <div class="popover-content">
    <div class='tooltip_contents'>
      <p>
        {{ body }}
      </p>
    </div>

    {% if link %}
      <div class='tooltip_link'>
        <a href="{{ link }}" target='_blank'>       
          {{ linkDesc }}
          <div class='tooltip_svg'>
            <svg
              width='19'
              height='19'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M4.294 14.763l9.155-9.155m-6.117-.47l6.43.156.158 6.432'
                stroke='#FEFEFE'
                strokeWidth='1.5px'
              />
            </svg>
          </div>
        </a>
      </div>
    {% endif %} 
  </div>
</div>


<a tabindex="0" role="button" data-toggle="popover" data-popover-content="#info-tooltip-contents" class="btn info-tooltip-button">
  <svg
      xmlns="http://www.w3.org/2000/svg"
      width="15px"
      height="15px"
      viewBox="0 0 18.2 18.3">
      <path
          d="M9.1 18.2c-5 0-9-4-9-9s4-9 9-9 9 4 9 9-4 9-9 9zm0-16.5C5 1.7 1.6 5.1 1.6 9.2s3.4 7.5 7.5 7.5 7.5-3.4 7.5-7.5-3.4-7.5-7.5-7.5z"
          fill="#919191"
      />
      <path
          d="M9.7 10.7c0-.5.1-.8.5-1.1 1.1-.9 1.4-1.5 1.4-2.3 0-1.3-.9-2.1-2.6-2.1-1.6 0-2.6 1.1-2.6 2.2 0 .3.1.6.2.8l1.3-.3c0-.1-.1-.3-.1-.4 0-.7.5-1.1 1.3-1.1.7 0 1.1.4 1.1.9 0 .6-.3.9-1 1.5s-.9 1-.9 1.7v.2h1.4zm-1.4 2.5h1.5v-1.5H8.3v1.5z"
          fill="#919191"
          stroke="#919191"
          stroke-width=".2"
          stroke-miter-limit="10"
      />
  </svg>
</a>

<script>
    // initialize all popovers
    $(function () {
        $('[data-toggle="popover"]').popover()
    })

    // link tooltip button to the contents
    $("[data-toggle=popover]").popover({
        html : true,
        class: "btn info-tooltip-button",
        content: function() {
            var content = $(this).attr("data-popover-content");
            return $(content).children(".popover-content").html();
        },
        title: function() {
            var title = $(this).attr("data-popover-content");
            return $(title).children(".popover-title").html();
        }
    });

    // keep popover open to allow user to click on links inside
    $('body').on('click', function (e) {
        $('[data-toggle="popover"]').each(function () {
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('hide');
        }
        });
    });

    // Only one popover opens at a time
    $('body').popover({
        selector: '[rel=popover]',
        trigger: "click"
    }).on("show.bs.popover", function(e){
        $("[rel=popover]").not(e.target).popover("destroy");
        $(".popover").remove();                    
    });
</script>